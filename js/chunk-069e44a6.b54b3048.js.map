{"version":3,"sources":["webpack:///./src/views/MainPage.vue","webpack:///./src/components/TweetsWall.vue","webpack:///src/components/TweetsWall.vue","webpack:///./src/components/TweetsWall.vue?8875","webpack:///./src/components/TweetsWall.vue?a0be","webpack:///src/views/MainPage.vue","webpack:///./src/views/MainPage.vue?c9d6","webpack:///./src/views/MainPage.vue?91e3","webpack:///./src/components/TweetsWall.vue?5b72","webpack:///./src/assets/images/tweetReply@2x.png","webpack:///./src/views/MainPage.vue?12d8","webpack:///./src/assets/images/tweetLike@2x.png"],"names":["render","_vm","this","_c","_self","staticClass","_m","on","$event","stopPropagation","preventDefault","handleSubmit","apply","arguments","attrs","_f","currentUser","avatar","directives","name","rawName","value","description","expression","domProps","target","composing","length","_v","_e","trim","tweets","afterClickReply","staticRenderFns","_l","tweet","key","id","path","UserId","_s","account","createdAt","isClickedTweet","require","commentCount","isLike","deleteLiked","likeCount","addLiked","mixins","props","initialTweets","type","required","data","oneTweet","watch","created","methods","fetchTweets","tweetId","console","Toast","icon","title","component","components","TweetsWall","computed","theTweetId","default","addCommentCount","module","exports"],"mappings":"uHAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACJ,EAAIK,GAAG,GAAGH,EAAG,OAAO,CAACI,GAAG,CAAC,OAAS,SAASC,GAAyD,OAAjDA,EAAOC,kBAAkBD,EAAOE,iBAAwBT,EAAIU,aAAaC,MAAM,KAAMC,cAAc,CAACV,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,MAAM,CAACE,YAAY,uBAAuB,CAACF,EAAG,cAAc,CAACW,MAAM,CAAC,GAAK,KAAK,CAACX,EAAG,MAAM,CAACE,YAAY,cAAcS,MAAM,CAAC,IAAMb,EAAIc,GAAG,aAAPd,CAAqBA,EAAIe,YAAYC,QAAQ,IAAM,mBAAmBd,EAAG,WAAW,CAACe,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,UAAUC,MAAOpB,EAAIqB,YAAaC,WAAW,gBAAgBT,MAAM,CAAC,KAAO,OAAO,YAAc,WAAWU,SAAS,CAAC,MAASvB,EAAIqB,aAAcf,GAAG,CAAC,MAAQ,SAASC,GAAWA,EAAOiB,OAAOC,YAAiBzB,EAAIqB,YAAYd,EAAOiB,OAAOJ,WAAUlB,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACF,EAAG,MAAM,CAACE,YAAY,eAAe,CAAEJ,EAAIqB,YAAYK,OAAS,IAAKxB,EAAG,OAAO,CAACE,YAAY,eAAe,CAACJ,EAAI2B,GAAG,kBAAkB3B,EAAI4B,KAAM5B,EAAIqB,aAAiD,IAAlCrB,EAAIqB,YAAYQ,OAAOH,OAAcxB,EAAG,OAAO,CAACE,YAAY,eAAe,CAACJ,EAAI2B,GAAG,YAAY3B,EAAI4B,OAAO1B,EAAG,SAAS,CAACE,YAAY,yBAAyBS,MAAM,CAAC,KAAO,WAAW,CAACb,EAAI2B,GAAG,eAAe,SAASzB,EAAG,MAAM,CAACE,YAAY,SAASF,EAAG,aAAa,CAACW,MAAM,CAAC,cAAgBb,EAAI8B,QAAQxB,GAAG,CAAC,oBAAoBN,EAAI+B,oBAAoB,IAE/3CC,EAAkB,CAAC,WAAY,IAAIhC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,SAAS,CAACF,EAAG,KAAK,CAACE,YAAY,cAAc,CAACJ,EAAI2B,GAAG,YCF9I5B,G,oBAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAMF,EAAIiC,GAAIjC,EAAI8B,QAAQ,SAASI,GAAO,OAAOhC,EAAG,MAAM,CAACiC,IAAID,EAAME,GAAGhC,YAAY,eAAe,CAACF,EAAG,cAAc,CAACE,YAAY,aAAaS,MAAM,CAAC,GAAK,CAAEwB,KAAO,mBAAkBH,EAAME,MAAS,CAAClC,EAAG,MAAM,CAACE,YAAY,YAAY,CAACF,EAAG,cAAc,CAACW,MAAM,CAAC,GAAK,CAAEwB,KAAO,UAASH,EAAMI,UAAa,CAACpC,EAAG,MAAM,CAACE,YAAY,cAAcS,MAAM,CAAC,IAAMb,EAAIc,GAAG,aAAPd,CAAqBkC,EAAMlB,QAAQ,IAAM,oBAAoB,GAAGd,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,MAAM,CAACE,YAAY,wBAAwB,CAACF,EAAG,cAAc,CAACW,MAAM,CAAC,GAAK,CAAEwB,KAAO,UAASH,EAAMI,UAAa,CAACpC,EAAG,IAAI,CAACE,YAAY,QAAQ,CAACJ,EAAI2B,GAAG3B,EAAIuC,GAAGL,EAAMhB,WAAWhB,EAAG,cAAc,CAACW,MAAM,CAAC,GAAK,CAAEwB,KAAO,UAASH,EAAMI,UAAa,CAACpC,EAAG,IAAI,CAACE,YAAY,WAAW,CAACJ,EAAI2B,GAAG,IAAI3B,EAAIuC,GAAGL,EAAMM,cAActC,EAAG,IAAI,CAACE,YAAY,QAAQ,CAACJ,EAAI2B,GAAG,IAAI3B,EAAIuC,GAAGvC,EAAIc,GAAG,UAAPd,CAAkBkC,EAAMO,gBAAgB,GAAGvC,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,IAAI,CAACF,EAAI2B,GAAG3B,EAAIuC,GAAGL,EAAMb,oBAAoBnB,EAAG,MAAM,CAACE,YAAY,4BAA4B,CAACF,EAAG,MAAM,CAACE,YAAY,qBAAqBS,MAAM,CAAC,cAAc,QAAQ,cAAc,eAAeP,GAAG,CAAC,MAAQ,SAASC,GAAgC,OAAxBA,EAAOE,iBAAwBT,EAAI0C,eAAeR,EAAME,OAAO,CAAClC,EAAG,MAAM,CAACE,YAAY,mBAAmBS,MAAM,CAAC,IAAM8B,EAAQ,QAAqC,IAAM,gBAAgBzC,EAAG,IAAI,CAACE,YAAY,UAAU,CAACJ,EAAI2B,GAAG3B,EAAIuC,GAAGL,EAAMU,mBAAoBV,EAAMW,OAAQ3C,EAAG,MAAM,CAACE,YAAY,qBAAqBE,GAAG,CAAC,MAAQ,SAASC,GAAyD,OAAjDA,EAAOC,kBAAkBD,EAAOE,iBAAwBT,EAAI8C,YAAYZ,EAAME,OAAO,CAAClC,EAAG,MAAM,CAACE,YAAY,mBAAmBS,MAAM,CAAC,IAAM,+CAA+C,IAAM,oBAAoBX,EAAG,IAAI,CAACE,YAAY,UAAU,CAACJ,EAAI2B,GAAG3B,EAAIuC,GAAGL,EAAMa,gBAAgB/C,EAAI4B,KAAOM,EAAMW,OAAoW7C,EAAI4B,KAAhW1B,EAAG,MAAM,CAACE,YAAY,qBAAqBE,GAAG,CAAC,MAAQ,SAASC,GAAyD,OAAjDA,EAAOC,kBAAkBD,EAAOE,iBAAwBT,EAAIgD,SAASd,EAAME,OAAO,CAAClC,EAAG,MAAM,CAACE,YAAY,mBAAmBS,MAAM,CAAC,IAAM8B,EAAQ,QAAoC,IAAM,sBAAsBzC,EAAG,IAAI,CAACE,YAAY,UAAU,CAACJ,EAAI2B,GAAG3B,EAAIuC,GAAGL,EAAMa,qBAA8B,MAAK,KAEvpEf,EAAkB,G,oCCyFP,GACfd,kBACA+B,uBACAC,OACAC,eACAC,WACAC,cAGAC,OACA,OACAxB,UACAyB,cAGAC,OACAL,iBAEA,qBAGAM,UACA,oBAEAC,SAEAC,cACA,gCAIAjB,kBACA,kCACA,UAGA,+CAIA,kBACA,IACA,WAAAY,SAAA,wBAAAM,YACA,sBACA,2BAEA,+BACA,SACA,IACA,EACAf,iBACAE,yBAEAb,GAEA,SACA2B,yBACAC,aACAC,aACAC,yBAMA,qBACA,IACA,WAAAV,SAAA,2BAAAM,YAEA,sBACA,2BAEA,+BACA,SACA,IACA,EACAf,iBACAE,yBAEAb,GAEA,SACA2B,yBACAC,aACAC,aACAC,2BChLoV,I,wBCQhVC,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIa,EAAAA,E,oBCiDA,GACf/C,gBACA+B,gBACAiB,YACAC,cAEAC,aACA,iCAEAlB,OACAC,eACAC,WACAC,aAEAgB,YACAjB,YACAkB,cACAD,kBAIAf,OACA,OACAxB,UACAT,iBAGAmC,OACAL,iBACA,oBAEAkB,cACA,0BAGAZ,UACA,gCAEAC,SACA,qBACA,IAEA,+BAKA,YAJAI,aACAC,eACAC,uBAMA,GADA,0CACA,iBAKA,YAJAF,aACAC,eACAC,iBAMA,WAAAV,SAAA,sBACAjC,+BAGA,sBACA,2BAIA,qBACAe,aACAE,iBACAjB,+BACAmB,iCACAtB,2BACAF,+BACAyB,2BACAM,YACAH,eACAC,YAIA,oBAGAiB,aACAC,eACAC,eAEA,SACAH,yBACAC,aACAC,aACAC,uBAIAO,mBACA,+BACA,SACA,MAAA3B,+BACAV,IAGAH,mBAEA,qCC/KkV,ICQ9U,G,UAAY,eACd,EACAhC,EACAiC,GACA,EACA,KACA,WACA,OAIa,e,6CCnBf,W,mBCAAwC,EAAOC,QAAU,skC,kCCAjB,W,4CCAAD,EAAOC,QAAU,8wD","file":"js/chunk-069e44a6.b54b3048.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"main\"},[_vm._m(0),_c('form',{on:{\"submit\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.handleSubmit.apply(null, arguments)}}},[_c('div',{staticClass:\"main-wrapper\"},[_c('div',{staticClass:\"tweet-wrapper\"},[_c('div',{staticClass:\"avatar-input d-flex\"},[_c('router-link',{attrs:{\"to\":\"\"}},[_c('img',{staticClass:\"user-avatar\",attrs:{\"src\":_vm._f(\"emptyImage\")(_vm.currentUser.avatar),\"alt\":\"user-avatar\"}})]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.description),expression:\"description\"}],attrs:{\"type\":\"text\",\"placeholder\":\"有什麼新鮮事？\"},domProps:{\"value\":(_vm.description)},on:{\"input\":function($event){if($event.target.composing)return;_vm.description=$event.target.value}}}),_c('div',{staticClass:\"input-footer\"},[_c('div',{staticClass:\"footer-wrapper\"},[_c('div',{staticClass:\"modal-error\"},[(_vm.description.length > 140)?_c('span',{staticClass:\"alert-error\"},[_vm._v(\" 字數不可超過140字 \")]):_vm._e(),(_vm.description && _vm.description.trim().length === 0)?_c('span',{staticClass:\"alert-error\"},[_vm._v(\"內容不可空白\")]):_vm._e()]),_c('button',{staticClass:\"btn-tweet btn-info btn\",attrs:{\"type\":\"submit\"}},[_vm._v(\" 推文 \")])])])],1)])])]),_c('div',{staticClass:\"line\"}),_c('TweetsWall',{attrs:{\"initialTweets\":_vm.tweets},on:{\"after-click-reply\":_vm.afterClickReply}})],1)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"title\"},[_c('h4',{staticClass:\"title-text\"},[_vm._v(\"首頁\")])])\n}]\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',_vm._l((_vm.tweets),function(tweet){return _c('div',{key:tweet.id,staticClass:\"tweets-wall\"},[_c('router-link',{staticClass:\"tweet-link\",attrs:{\"to\":{ path: `/main/replylist/${tweet.id}` }}},[_c('div',{staticClass:\"user-img\"},[_c('router-link',{attrs:{\"to\":{ path: `/users/${tweet.UserId}` }}},[_c('img',{staticClass:\"user-avatar\",attrs:{\"src\":_vm._f(\"emptyImage\")(tweet.avatar),\"alt\":\"user-avatar\"}})])],1),_c('div',{staticClass:\"tweet-box\"},[_c('div',{staticClass:\"tweet-content d-flex\"},[_c('router-link',{attrs:{\"to\":{ path: `/users/${tweet.UserId}` }}},[_c('p',{staticClass:\"name\"},[_vm._v(_vm._s(tweet.name))])]),_c('router-link',{attrs:{\"to\":{ path: `/users/${tweet.UserId}` }}},[_c('p',{staticClass:\"account\"},[_vm._v(\"@\"+_vm._s(tweet.account))])]),_c('p',{staticClass:\"time\"},[_vm._v(\"‧\"+_vm._s(_vm._f(\"fromNow\")(tweet.createdAt)))])],1),_c('div',{staticClass:\"tweet-text\"},[_c('p',[_vm._v(_vm._s(tweet.description))])])]),_c('div',{staticClass:\"tweet-reply-heart d-flex\"},[_c('div',{staticClass:\"tweet-reply d-flex\",attrs:{\"data-toggle\":\"modal\",\"data-target\":\"#replyModal\"},on:{\"click\":function($event){$event.preventDefault();return _vm.isClickedTweet(tweet.id)}}},[_c('img',{staticClass:\"icon-reply-heart\",attrs:{\"src\":require(\"@/assets/images/tweetReply@2x.png\"),\"alt\":\"reply-icon\"}}),_c('p',{staticClass:\"number\"},[_vm._v(_vm._s(tweet.commentCount))])]),(tweet.isLike)?_c('div',{staticClass:\"tweet-heart d-flex\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.deleteLiked(tweet.id)}}},[_c('img',{staticClass:\"icon-reply-heart\",attrs:{\"src\":\"https://i.postimg.cc/rFB1FHD6/icon-Liked.png\",\"alt\":\"red-heart-icon\"}}),_c('p',{staticClass:\"number\"},[_vm._v(_vm._s(tweet.likeCount))])]):_vm._e(),(!tweet.isLike)?_c('div',{staticClass:\"tweet-heart d-flex\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.addLiked(tweet.id)}}},[_c('img',{staticClass:\"icon-reply-heart\",attrs:{\"src\":require(\"@/assets/images/tweetLike@2x.png\"),\"alt\":\"empty-heart-icon\"}}),_c('p',{staticClass:\"number\"},[_vm._v(_vm._s(tweet.likeCount))])]):_vm._e()])])],1)}),0)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div class=\"tweets-wall\" v-for=\"tweet in tweets\" :key=\"tweet.id\">\n      <router-link\n        :to=\"{ path: `/main/replylist/${tweet.id}` }\"\n        class=\"tweet-link\"\n      >\n        <div class=\"user-img\">\n          <!-- 推文者頭像（點擊後會連到該用戶的個人資料頁） -->\n          <router-link :to=\"{ path: `/users/${tweet.UserId}` }\">\n            <img\n              class=\"user-avatar\"\n              :src=\"tweet.avatar | emptyImage\"\n              alt=\"user-avatar\"\n            />\n          </router-link>\n        </div>\n\n        <div class=\"tweet-box\">\n          <!-- 推文資訊 -->\n          <div class=\"tweet-content d-flex\">\n            <router-link :to=\"{ path: `/users/${tweet.UserId}` }\">\n              <p class=\"name\">{{ tweet.name }}</p>\n            </router-link>\n            <router-link :to=\"{ path: `/users/${tweet.UserId}` }\">\n              <p class=\"account\">@{{ tweet.account }}</p>\n            </router-link>\n\n            <p class=\"time\">‧{{ tweet.createdAt | fromNow }}</p>\n          </div>\n\n          <!-- 推文敘述 -->\n          <div class=\"tweet-text\">\n            <p>{{ tweet.description }}</p>\n          </div>\n        </div>\n\n        <div class=\"tweet-reply-heart d-flex\">\n          <!-- 留言圖示（點擊後會跳出留言互動視窗） -->\n          <div\n            @click.prevent=\"isClickedTweet(tweet.id)\"\n            class=\"tweet-reply d-flex\"\n            data-toggle=\"modal\"\n            data-target=\"#replyModal\"\n          >\n            <img\n              class=\"icon-reply-heart\"\n              src=\"~@/assets/images/tweetReply@2x.png\"\n              alt=\"reply-icon\"\n            />\n            <p class=\"number\">{{ tweet.commentCount }}</p>\n          </div>\n\n          <!-- 紅色愛心圖示（點擊後會加到喜歡的內容） -->\n          <div\n            class=\"tweet-heart d-flex\"\n            v-if=\"tweet.isLike\"\n            @click.stop.prevent=\"deleteLiked(tweet.id)\"\n          >\n            <img\n              class=\"icon-reply-heart\"\n              src=\"https://i.postimg.cc/rFB1FHD6/icon-Liked.png\"\n              alt=\"red-heart-icon\"\n            />\n            <p class=\"number\">{{ tweet.likeCount }}</p>\n          </div>\n\n          <!-- 空白愛心圖示（點擊後會加到喜歡的內容） -->\n          <div\n            class=\"tweet-heart d-flex\"\n            v-if=\"!tweet.isLike\"\n            @click.stop.prevent=\"addLiked(tweet.id)\"\n          >\n            <img\n              class=\"icon-reply-heart\"\n              src=\"~@/assets/images/tweetLike@2x.png\"\n              alt=\"empty-heart-icon\"\n            />\n            <p class=\"number\">{{ tweet.likeCount }}</p>\n          </div>\n        </div>\n      </router-link>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { fromNowFilter, emptyImageFilter } from \"./../utils/mixins\";\nimport { Toast } from \"./../utils/helpers\";\nimport tweetsAPI from \"./../apis/tweets\";\n\nexport default {\n  name: \"TweetsWall\",\n  mixins: [fromNowFilter, emptyImageFilter],\n  props: {\n    initialTweets: {\n      type: Array,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      tweets: [],\n      oneTweet: {},\n    };\n  },\n  watch: {\n    initialTweets(newValue) {\n      // 監聽：為了發推文後，即時更新\n      this.tweets = [...newValue];\n    },\n  },\n  created() {\n    this.fetchTweets();\n  },\n  methods: {\n    // created 時抓取從父元件 MainPage 繼承來的推文資料\n    fetchTweets() {\n      this.tweets = this.initialTweets;\n    },\n\n    // 透過 tweetID 找出被點擊留言的是哪一篇推文，用於顯示 replyModal\n    isClickedTweet(tweetId) {\n      this.oneTweet = this.tweets.find((tweet) => {\n        return tweet.id === tweetId;\n      });\n\n      this.$emit(\"after-click-reply\", this.oneTweet);\n    },\n\n    // 當點擊喜歡則加上愛心並加愛心數\n    async addLiked(tweetId) {\n      try {\n        const { data } = await tweetsAPI.tweets.addLiked({ tweetId });\n        if (data.status === \"error\") {\n          throw new Error(data.message);\n        }\n        this.tweets = this.tweets.map((tweet) => {\n          return tweetId === tweet.id\n            ? {\n                ...tweet,\n                isLike: !tweet.isLike, //將愛心改成紅心\n                likeCount: tweet.likeCount + 1, //愛心數加一\n              }\n            : tweet;\n        });\n      } catch (error) {\n        console.error(error.message);\n        Toast.fire({\n          icon: \"error\",\n          title: \"無法加入喜歡，請稍後再試\",\n        });\n      }\n    },\n\n    // 點擊不喜歡則移除愛心並扣愛心數\n    async deleteLiked(tweetId) {\n      try {\n        const { data } = await tweetsAPI.tweets.deleteLiked({ tweetId });\n\n        if (data.status === \"error\") {\n          throw new Error(data.message);\n        }\n        this.tweets = this.tweets.map((tweet) => {\n          return tweetId === tweet.id\n            ? {\n                ...tweet,\n                isLike: !tweet.isLike, //將愛心改成空心\n                likeCount: tweet.likeCount - 1, //愛心數減一\n              }\n            : tweet;\n        });\n      } catch (error) {\n        console.error(error.message);\n        Toast.fire({\n          icon: \"error\",\n          title: \"無法移除喜歡，請稍後再試\",\n        });\n      }\n    },\n  },\n};\n</script>\n\n\n\n<style scoped lang=\"scss\">\n@import \"../assets/scss/tweetsBoard.scss\";\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TweetsWall.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TweetsWall.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TweetsWall.vue?vue&type=template&id=391ae4f4&scoped=true&\"\nimport script from \"./TweetsWall.vue?vue&type=script&lang=js&\"\nexport * from \"./TweetsWall.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TweetsWall.vue?vue&type=style&index=0&id=391ae4f4&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"391ae4f4\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"main\">\n    <div class=\"title\">\n      <h4 class=\"title-text\">首頁</h4>\n    </div>\n\n    <!-- 新增推文區塊 -->\n    <form @submit.stop.prevent=\"handleSubmit\">\n      <div class=\"main-wrapper\">\n        <div class=\"tweet-wrapper\">\n          <div class=\"avatar-input d-flex\">\n            <!-- 使用者頭像（點擊後會連到該用戶的個人資料頁） -->\n            <!-- 新增 router-link：目前使用者的個人資料頁  -->\n            <router-link to=\"\">\n              <img\n                class=\"user-avatar\"\n                :src=\"currentUser.avatar | emptyImage\"\n                alt=\"user-avatar\"\n              />\n            </router-link>\n\n            <textarea\n              v-model=\"description\"\n              type=\"text\"\n              placeholder=\"有什麼新鮮事？\"\n            />\n\n            <div class=\"input-footer\">\n              <div class=\"footer-wrapper\">\n                <div class=\"modal-error\">\n                  <!-- 字數限制 -->\n                  <span v-if=\"description.length > 140\" class=\"alert-error\">\n                    字數不可超過140字\n                  </span>\n\n                  <!-- 空白限制 -->\n                  <span\n                    class=\"alert-error\"\n                    v-if=\"description && description.trim().length === 0\"\n                    >內容不可空白</span\n                  >\n                </div>\n\n                <!-- 送出按鈕 -->\n                <button type=\"submit\" class=\"btn-tweet btn-info btn\">\n                  推文\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </form>\n\n    <div class=\"line\"></div>\n\n    <TweetsWall @after-click-reply=\"afterClickReply\" :initialTweets=\"tweets\" />\n  </div>\n</template>\n\n\n<script>\nimport TweetsWall from \"../components/TweetsWall.vue\";\nimport { Toast } from \"./../utils/helpers\";\nimport tweetsAPI from \"./../apis/tweets\";\nimport { mapState } from \"vuex\";\nimport { emptyImageFilter } from \"./../utils/mixins\";\n\nexport default {\n  name: \"MainPage\",\n  mixins: [emptyImageFilter],\n  components: {\n    TweetsWall,\n  },\n  computed: {\n    ...mapState([\"currentUser\"]),\n  },\n  props: {\n    initialTweets: {\n      type: Array,\n      required: true,\n    },\n    theTweetId: {\n      type: Number,\n      default: () => ({\n        theTweetId: -1,\n      }),\n    },\n  },\n  data() {\n    return {\n      tweets: [],\n      description: \"\",\n    };\n  },\n  watch: {\n    initialTweets(newValue) {\n      this.tweets = [...newValue];\n    },\n    theTweetId(newVal) {\n      this.addCommentCount(newVal);\n    },\n  },\n  created() {\n    this.tweets = this.initialTweets;\n  },\n  methods: {\n    async handleSubmit() {\n      try {\n        // 先判斷有無超過字數\n        if (this.description.length > 140) {\n          Toast.fire({\n            icon: \"warning\",\n            title: \"字數不可超過 140 字\",\n          });\n          return;\n        }\n        // 若沒超過，刪掉空白後再檢查一次\n        this.description = this.description.trim();\n        if (!this.description) {\n          Toast.fire({\n            icon: \"warning\",\n            title: \"內容不可空白\",\n          });\n          return;\n        }\n\n        // 向 API 請求建立新推文並接受回傳的資料\n        const { data } = await tweetsAPI.tweets.create({\n          description: this.description,\n        });\n\n        if (data.status === \"error\") {\n          throw new Error(data.message);\n        }\n\n        // 新的推文資料放入陣列第一筆\n        this.tweets.unshift({\n          id: data.data.Id,\n          UserId: data.data.id,\n          description: data.data.description,\n          account: this.currentUser.account,\n          name: this.currentUser.name,\n          avatar: this.currentUser.avatar,\n          createdAt: data.data.createdAt,\n          likeCount: 0,\n          commentCount: 0,\n          isLike: false,\n        });\n\n        // 將發推區內的文字清空\n        this.description = \"\";\n\n        // 跳出通知\n        Toast.fire({\n          icon: \"success\",\n          title: \"推文成功\",\n        });\n      } catch (error) {\n        console.error(error.message);\n        Toast.fire({\n          icon: \"error\",\n          title: \"推文失敗，請稍後再試\",\n        });\n      }\n    },\n    addCommentCount(id) {\n      this.tweets = this.tweets.map((tweet) => {\n        return tweet.id === id\n          ? { ...tweet, commentCount: tweet.commentCount + 1 }\n          : tweet;\n      });\n    },\n    afterClickReply(payload) {\n      // 被點擊的那則留言的資料，繼續傳到父層 Main.vue\n      this.$emit(\"after-click-reply\", payload);\n    },\n  },\n};\n</script>\n\n\n<style scoped lang=\"scss\">\n@import \"../assets/scss/tweetsBoard.scss\";\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MainPage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MainPage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MainPage.vue?vue&type=template&id=4d8dc789&scoped=true&\"\nimport script from \"./MainPage.vue?vue&type=script&lang=js&\"\nexport * from \"./MainPage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MainPage.vue?vue&type=style&index=0&id=4d8dc789&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4d8dc789\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TweetsWall.vue?vue&type=style&index=0&id=391ae4f4&prod&scoped=true&lang=scss&\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAK2SURBVHgBvVZdbtpAEJ5Z23mpULlBOQI3CDlBkxOUvEUJVYzapFGVFBOoFBGkuBJEvNGcoHCCcoNyg/oAfaCvYHs6swaUCJvWhuaTYMf27n47s/MH8MzApA+2bednZq6MCnYJoIgEBVgLGgOiFxIM728bX1MRVs4+nQKRw1/zkAF8QI9/9TjiFcKTD1d9DKEcraQRAQ4D3xj0XMeDNTg+c4oGBMUQoba0BqLTaV3XEwnfntfuiEKbxQmP9W77swsZUHl/ydbBWhzpklCbEUgIJiEYe/e3zhg2gGisIPgRsdBBp9UciKjk78i+KBCQaAYhQHVTMoHsQQRV/UDYFydcElqWVWJVmXS9h6VFt91gi9GIRfb4F+UlIRGeyohEme5sHRDCBz2ieq0JbdvJM1NRHjrt5gi2DGO2M5iLmkNNYVqIjkIb31scXNeZEILHYv7kXfOVUqbKFNxZoXzT9ERAwv9GzIlE720Fv36r3g1nEOJAZy9duO42cWx/LEqKFLO6rjtR0RGi+1u47jaBplGSURGM9KjfEkSpB9XpNrXUeyHokCOihyVhFA40kuAPrNwdbAnBzsua7CmlaxFyavHRN8xDsTPfZblyfvVN0h1sgMr5ZW1eCGTvg8X7J9Xi6MIpGGHwXcqL1DSFMJhNZ1967o0HKSBknD8dkZm0+rjqrNRDTer7DiK+Wb5kL+aZ2rHYCsNuqxGbAsUqpmX1WSxF67DeaV87j+ckthhc00piXlC4+6S9YG/rtBt7sKrVPoTYn3cJE1btIC5VmkmE88l6geTbmTkrcwJecSjxRN/K9fkg+/r43CVwMjnU8R0DBf8AyYcIOI7TyjdzP1nch6hLqPJB95LIBIkarkOyVg3vb2vTEyIU51rpu0rb+2TRMJ9Wq0yEoR9OlGWIuFFHlwoSKrpD2AB/AFbYPbGYXea3AAAAAElFTkSuQmCC\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MainPage.vue?vue&type=style&index=0&id=4d8dc789&prod&scoped=true&lang=scss&\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAnCAYAAAB5XdqFAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAATMSURBVHgB1VjPTxtHFH6zP2grhda59Vbn1ltNqtCKoMT01FvcY0+Jbyi4woiAogrCGtOKYlQ2ClBuhFtv0GNPrNOGolAp7l8QH9ubpfQQddf7Om/t3Z1dr+1dE+rmk0Az49k337z3Zua9B/CGgMWZVCwWU5ZyKYPAMgwwRWM2Y3XbNI09fb0OCTBd1NKq+k8WUUoLw8b25poBgxJ1CI68Ows2FvnMVJdphg1wsFspP+4lq3BvKQuMrfBmNnICQoMxODJNsxS1+a5EZxYf3GY26j0IhgU9ls2Xc7quN8Rx2qz51ugWs+FOHDkIUOd/pfDGI4kWFpdWAJkWlIA1PrtKO299yT7i/3PhRZqmOeVqZLp4Py2r6jFfJB2SZfD/1TaDFDJ2i2FoDmPa9sZqqSvRwsKDWS5J92QyqHPN5qN8aPq+lpYtS2OM3RbJqubLMWqb6ujzIEl8qJiKputao2Nd7hoosX2RMF97bmejrHcQJQ0oqvpCGDpSTDkfJVjEzL3lIvevLfC3f4Tkc+CbG9Ge29n8Ru8lp1jUUpba3AffUg3LNMfIQpI4kZtpRdhNPQ5Jws5mWecHKu8NIOSSkiTQWrQm32mtPZTiiiPivkbD2rRk+creulaHBCjML+kgsdnAILLS9uaqBglALqU0m75lEac8jYrapBOclCRBaSoaWcKTz9tJSRJobUQ8AJ9QziPKkGW8BcRJCUCmo4Pny4ESDAhSltC56fsoQ4+oYv1dgwFBtwO5jWXKV/o9Ar2gWIrPAelFhA6faGxXypfhf4CZxeUX7nUlhX/kzPue8mHAISoeHAy/IkOEePl7GhVP68z82gcwZNwtfp0Rug3h1GPda8uvxmDIkGQhDESoSUKnKrSzMGTwd/+W0KuKh8nwm36QMURkhbbhEXWiI/ROfMoJdIcEWtuNulqv25oRup7woddsReNDAQpho4QtSweI8tdAjHCyw9AqBUdi5GXKsvMMB4i2Qjon+m5hCFrtFhx1vEyWrOSF7n+q1a8Wlu9EaZPQQdTZge37KveXfUrQ4IJBa/Dgu2uoKUV9RHGlewPQ6WuOjF64CzRH3lsRT7qoTYIc9dHpqfHqk+s3/wI/d/n02mS2fva0+gdcAMjkCLju9nm8MffDxqohzulZgCgsLB+CkGjZ0JzarXw7cKwaBScFUtTnbv2ATP6oUs6H50m9hFCiJQQrKQbyIQmG10iS8n6XZJTJXfStPd1d0DISNn1h7bw9XBFJCqeCEsz7GzwzGOuWq0n9BO5WtJrNCwFunwRb6qXj89wETk2LywgUJxjmeyWUMsTA2cmT2vjEDcYfgGxb6vu2PPL51fGJn38//TWRZl2SXIYfb1JKXSnv9fouFlHCs5MnRpgsk+Xcx+MTP8UlSz6J6ju/cSEfBkjGSKljE40iy+iAcbLXrk9Wz05++bPXt05EJMuHAXMnKE4kItqVLEjT45NZePa0Wo0kSYU3Bj/SXI+jU+ZZW4+5bLyKc+Ti80s5lNlWoPrGbwSe0niVvy7F2wZn+UW/CvNrI0pwyo5287ijtgnYfhRYJjiMhqUo+UHKReci6oJrTusTEja4qUtxKnrdkNhHo0B+e/XGZwfMti/zom6aD73d/onM/B0PyL989H3ZgHPgX5UtGWLrJ4H6AAAAAElFTkSuQmCC\""],"sourceRoot":""}