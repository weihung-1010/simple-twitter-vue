{"version":3,"sources":["webpack:///./src/views/AdminTweets.vue?65f1","webpack:///./src/apis/admin.js","webpack:///./src/components/AdminTweetsList.vue?786c","webpack:///./src/views/AdminTweets.vue","webpack:///./src/components/AdminTweetsList.vue","webpack:///src/components/AdminTweetsList.vue","webpack:///./src/components/AdminTweetsList.vue?64fe","webpack:///./src/components/AdminTweetsList.vue?6105","webpack:///src/views/AdminTweets.vue","webpack:///./src/views/AdminTweets.vue?1aff","webpack:///./src/views/AdminTweets.vue?16be"],"names":["tweets","get","apiHelper","delete","tweetId","users","render","_vm","this","_c","_self","staticClass","_v","isLoading","attrs","on","afterDeleteTweet","staticRenderFns","_l","initialTweets","tweet","key","id","_f","avatar","_s","name","account","createdAt","description","$event","preventDefault","stopPropagation","handleDeleteBtnClick","mixins","props","type","required","methods","data","Toast","icon","title","console","component","components","Navbar","AdminTweetsList","Spinner","created"],"mappings":"2IAAA,W,kCCAA,gBAGe,QACbA,OAAQ,CAENC,MACE,OAAOC,OAAUD,IAAI,kBAGvBE,QAAO,QAAEC,IACP,OAAOF,OAAUC,OAAQ,iBAAgBC,KAK7CC,MAAO,CAELJ,MACE,OAAOC,OAAUD,IAAI,oB,yDCnB3B,W,yCCAA,IAAIK,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,MAAM,CAACE,YAAY,OAAO,CAACF,EAAG,MAAM,CAACE,YAAY,SAAS,CAACF,EAAG,WAAW,GAAGA,EAAG,MAAM,CAACE,YAAY,UAAU,CAACF,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,KAAK,CAACE,YAAY,cAAc,CAACJ,EAAIK,GAAG,UAAWL,EAAIM,UAAWJ,EAAG,UAAU,CAACE,YAAY,YAAYF,EAAG,kBAAkB,CAACK,MAAM,CAAC,iBAAiBP,EAAIP,QAAQe,GAAG,CAAC,qBAAqBR,EAAIS,qBAAqB,UAEjdC,EAAkB,G,wBCFlBX,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,oBAAoB,CAACF,EAAG,MAAM,CAACE,YAAY,UAAUJ,EAAIW,GAAIX,EAAIY,eAAe,SAASC,GAAO,OAAOX,EAAG,MAAM,CAACY,IAAID,EAAME,GAAGX,YAAY,SAAS,CAACF,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,MAAM,CAACE,YAAY,SAASG,MAAM,CAAC,IAAMP,EAAIgB,GAAG,aAAPhB,CAAqBa,EAAMI,QAAQ,IAAM,cAAcf,EAAG,MAAM,CAACE,YAAY,oBAAoB,CAACF,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,OAAO,CAACE,YAAY,cAAc,CAACJ,EAAIK,GAAGL,EAAIkB,GAAGL,EAAMM,SAASjB,EAAG,OAAO,CAACE,YAAY,0BAA0B,CAACJ,EAAIK,GAAG,IAAIL,EAAIkB,GAAGL,EAAMO,SAAS,IAAIpB,EAAIkB,GAAGlB,EAAIgB,GAAG,UAAPhB,CAAkBa,EAAMQ,iBAAiBnB,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACJ,EAAIK,GAAG,IAAIL,EAAIkB,GAAGlB,EAAIgB,GAAG,iBAAPhB,CAAyBa,EAAMS,cAAc,OAAOpB,EAAG,SAAS,CAACE,YAAY,aAAaI,GAAG,CAAC,MAAQ,SAASe,GAAyD,OAAjDA,EAAOC,iBAAiBD,EAAOE,kBAAyBzB,EAAI0B,qBAAqBb,EAAME,OAAO,CAACf,EAAIK,GAAG,gBAAe,MAEr7BK,EAAkB,G,oCCyCP,GACfS,uBACAQ,8BACAC,OACAhB,eACAiB,WACAC,cAGAC,SACA,8BACA,IAEA,WAAAC,SAAA,sBAAAnC,YACA,sBACA,2BAGA,mCACAoC,aACAC,eACAC,kBAEA,SAEAC,yBACAH,aACAC,aACAC,4BCvEyV,I,wBCQrVE,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIa,EAAAA,E,oBCYA,GACflB,mBACAmB,YACAC,cACAC,kBACAC,gBAEAT,OACA,OACAvC,UACAa,eAGAoC,UAEA,oBAEAX,SACA,oBACA,IAEA,kBAGA,WAAAC,SAAA,oBAEA,sBACA,2BAGA,cAIA,kBACA,SAEA,kBAGAI,yBACAH,aACAC,aACAC,2BAMA1B,oBAEA,+CClFqV,ICQjV,G,UAAY,eACd,EACAV,EACAW,GACA,EACA,KACA,WACA,OAIa,e","file":"js/chunk-4ff85f31.ab4a2057.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminTweets.vue?vue&type=style&index=0&id=122eb3e5&prod&lang=scss&scoped=true&\"","import { apiHelper } from './../utils/helpers'\n// const getToken = () => localStorage.getItem('token')\n\nexport default {\n  tweets: {\n    // 取得所有推文\n    get() {\n      return apiHelper.get('/admin/tweets')\n    },\n    // 刪除特定推文\n    delete({ tweetId }) {\n      return apiHelper.delete(`/admin/tweets/${tweetId}`)\n    }\n  },\n\n\n  users: {\n    // 取得所有使用者\n    get() {\n      return apiHelper.get('/admin/users')\n    }\n  }\n}\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminTweetsList.vue?vue&type=style&index=0&id=4506238d&prod&lang=scss&scoped=true&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-2\"},[_c('Navbar')],1),_c('div',{staticClass:\"col-10\"},[_c('div',{staticClass:\"list-wrapper\"},[_c('h4',{staticClass:\"list-title\"},[_vm._v(\"推文清單\")]),(_vm.isLoading)?_c('Spinner',{staticClass:\"spinner\"}):_c('AdminTweetsList',{attrs:{\"initial-tweets\":_vm.tweets},on:{\"after-delete-tweet\":_vm.afterDeleteTweet}})],1)])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"tweets-container\"},[_c('div',{staticClass:\"tweets\"},_vm._l((_vm.initialTweets),function(tweet){return _c('div',{key:tweet.id,staticClass:\"tweet\"},[_c('div',{staticClass:\"img-container\"},[_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm._f(\"emptyImage\")(tweet.avatar),\"alt\":\"avatar\"}})]),_c('div',{staticClass:\"detail-container\"},[_c('div',{staticClass:\"tweet-owner\"},[_c('span',{staticClass:\"owner-name\"},[_vm._v(_vm._s(tweet.name))]),_c('span',{staticClass:\"owner-account-datetime\"},[_vm._v(\"@\"+_vm._s(tweet.account)+\"・\"+_vm._s(_vm._f(\"fromNow\")(tweet.createdAt)))])]),_c('div',{staticClass:\"tweet-content\"},[_vm._v(\" \"+_vm._s(_vm._f(\"first50Letters\")(tweet.description))+\" \")]),_c('button',{staticClass:\"delete-btn\",on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.handleDeleteBtnClick(tweet.id)}}},[_vm._v(\" ✕ \")])])])}),0)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n<template>\n  <div class=\"tweets-container\">\n    <div class=\"tweets\">\n      <div class=\"tweet\" v-for=\"tweet in initialTweets\" :key=\"tweet.id\">\n        <!-- Avatar -->\n        <div class=\"img-container\">\n          <!-- 若無頭像則套用 emptyImage 濾鏡，改用替代圖片 -->\n          <img class=\"avatar\" :src=\"tweet.avatar | emptyImage\" alt=\"avatar\" />\n        </div>\n\n        <!-- Tweet Details -->\n        <div class=\"detail-container\">\n          <div class=\"tweet-owner\">\n            <span class=\"owner-name\">{{ tweet.name }}</span>\n            <span class=\"owner-account-datetime\"\n              >@{{ tweet.account }}・{{ tweet.createdAt | fromNow }}</span\n            >\n          </div>\n          <div class=\"tweet-content\">\n            {{ tweet.description | first50Letters }}\n          </div>\n          <button\n            class=\"delete-btn\"\n            @click.prevent.stop=\"handleDeleteBtnClick(tweet.id)\"\n          >\n            ✕\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {\n  fromNowFilter,\n  emptyImageFilter,\n  first50LettersFilter,\n} from \"./../utils/mixins\";\nimport { Toast } from \"./../utils/helpers\";\nimport adminAPI from \"./../apis/admin\";\n\nexport default {\n  name: \"AdminTweetsList\",\n  mixins: [fromNowFilter, emptyImageFilter, first50LettersFilter],\n  props: {\n    initialTweets: {\n      type: Array,\n      required: true,\n    },\n  },\n  methods: {\n    async handleDeleteBtnClick(tweetId) {\n      try {\n        // 透過 API 請伺服器刪掉這篇推文\n        const { data } = await adminAPI.tweets.delete({ tweetId });\n        if (data.status === \"error\") {\n          throw new Error(data.message);\n        }\n        // 觸發事件，傳回父元件並使其執行刪除推文的動作\n        this.$emit(\"after-delete-tweet\", tweetId);\n        Toast.fire({\n          icon: \"success\",\n          title: \"推文已成功刪除\",\n        });\n      } catch (error) {\n        // 報錯通知\n        console.error(error.message);\n        Toast.fire({\n          icon: \"error\",\n          title: \"無法刪除此推文，請稍後再試\",\n        });\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"./../assets/scss/adminTweets.scss\";\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminTweetsList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminTweetsList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AdminTweetsList.vue?vue&type=template&id=4506238d&scoped=true&\"\nimport script from \"./AdminTweetsList.vue?vue&type=script&lang=js&\"\nexport * from \"./AdminTweetsList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AdminTweetsList.vue?vue&type=style&index=0&id=4506238d&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4506238d\",\n  null\n  \n)\n\nexport default component.exports","\n<template>\n  <div class=\"container\">\n    <div class=\"row\">\n      <div class=\"col-2\">\n        <Navbar />\n      </div>\n\n      <div class=\"col-10\">\n        <div class=\"list-wrapper\">\n          <h4 class=\"list-title\">推文清單</h4>\n          <Spinner class=\"spinner\" v-if=\"isLoading\" />\n          <AdminTweetsList\n            v-else\n            :initial-tweets=\"tweets\"\n            @after-delete-tweet=\"afterDeleteTweet\"\n          />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n\n<script>\nimport Navbar from \"./../components/Navbar.vue\";\nimport AdminTweetsList from \"./../components/AdminTweetsList.vue\";\nimport adminAPI from \"./../apis/admin\";\nimport { Toast } from \"./../utils/helpers\";\nimport Spinner from \"./../components/Spinner.vue\";\n\nexport default {\n  name: \"AdminTweets\",\n  components: {\n    Navbar,\n    AdminTweetsList,\n    Spinner,\n  },\n  data() {\n    return {\n      tweets: [],\n      isLoading: true,\n    };\n  },\n  created() {\n    // 載入頁面時取得所有推文\n    this.fetchTweets();\n  },\n  methods: {\n    async fetchTweets() {\n      try {\n        // 在取得資料前，讓 spinner 出現\n        this.isLoading = true;\n\n        // 向 API 請求所有推文資料\n        const { data } = await adminAPI.tweets.get();\n\n        if (data.status === \"error\") {\n          throw new Error(data.message);\n        }\n        // 將 API 回傳的推文陣列存在 tweets 中\n        this.tweets = data;\n\n\n        // 成功取得資料後，讓 spinner 消失\n        this.isLoading = false;\n      } catch (error) {\n        // 確定無法資料後，讓 spinner 消失\n        this.isLoading = false;\n\n        // 報錯\n        console.error(error.message);\n        Toast.fire({\n          icon: \"error\",\n          title: \"無法取得推文清單，請稍後再試\",\n        });\n      }\n    },\n\n    // 刪除其中一篇推文\n    afterDeleteTweet(tweetId) {\n      // 將要刪除的推文過濾掉\n      this.tweets = this.tweets.filter((tweet) => tweet.id !== tweetId);\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"./../assets/scss/adminTweets.scss\";\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminTweets.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminTweets.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AdminTweets.vue?vue&type=template&id=122eb3e5&scoped=true&\"\nimport script from \"./AdminTweets.vue?vue&type=script&lang=js&\"\nexport * from \"./AdminTweets.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AdminTweets.vue?vue&type=style&index=0&id=122eb3e5&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"122eb3e5\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}