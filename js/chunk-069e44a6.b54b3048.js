(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-069e44a6"],{4385:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main"},[t._m(0),e("form",{on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit.apply(null,arguments)}}},[e("div",{staticClass:"main-wrapper"},[e("div",{staticClass:"tweet-wrapper"},[e("div",{staticClass:"avatar-input d-flex"},[e("router-link",{attrs:{to:""}},[e("img",{staticClass:"user-avatar",attrs:{src:t._f("emptyImage")(t.currentUser.avatar),alt:"user-avatar"}})]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],attrs:{type:"text",placeholder:"有什麼新鮮事？"},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}}),e("div",{staticClass:"input-footer"},[e("div",{staticClass:"footer-wrapper"},[e("div",{staticClass:"modal-error"},[t.description.length>140?e("span",{staticClass:"alert-error"},[t._v(" 字數不可超過140字 ")]):t._e(),t.description&&0===t.description.trim().length?e("span",{staticClass:"alert-error"},[t._v("內容不可空白")]):t._e()]),e("button",{staticClass:"btn-tweet btn-info btn",attrs:{type:"submit"}},[t._v(" 推文 ")])])])],1)])])]),e("div",{staticClass:"line"}),e("TweetsWall",{attrs:{initialTweets:t.tweets},on:{"after-click-reply":t.afterClickReply}})],1)},a=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"title"},[e("h4",{staticClass:"title-text"},[t._v("首頁")])])}],r=(s("d9e2"),s("3c65"),function(){var t=this,e=t._self._c;return e("div",t._l(t.tweets,(function(i){return e("div",{key:i.id,staticClass:"tweets-wall"},[e("router-link",{staticClass:"tweet-link",attrs:{to:{path:"/main/replylist/"+i.id}}},[e("div",{staticClass:"user-img"},[e("router-link",{attrs:{to:{path:"/users/"+i.UserId}}},[e("img",{staticClass:"user-avatar",attrs:{src:t._f("emptyImage")(i.avatar),alt:"user-avatar"}})])],1),e("div",{staticClass:"tweet-box"},[e("div",{staticClass:"tweet-content d-flex"},[e("router-link",{attrs:{to:{path:"/users/"+i.UserId}}},[e("p",{staticClass:"name"},[t._v(t._s(i.name))])]),e("router-link",{attrs:{to:{path:"/users/"+i.UserId}}},[e("p",{staticClass:"account"},[t._v("@"+t._s(i.account))])]),e("p",{staticClass:"time"},[t._v("‧"+t._s(t._f("fromNow")(i.createdAt)))])],1),e("div",{staticClass:"tweet-text"},[e("p",[t._v(t._s(i.description))])])]),e("div",{staticClass:"tweet-reply-heart d-flex"},[e("div",{staticClass:"tweet-reply d-flex",attrs:{"data-toggle":"modal","data-target":"#replyModal"},on:{click:function(e){return e.preventDefault(),t.isClickedTweet(i.id)}}},[e("img",{staticClass:"icon-reply-heart",attrs:{src:s("6918"),alt:"reply-icon"}}),e("p",{staticClass:"number"},[t._v(t._s(i.commentCount))])]),i.isLike?e("div",{staticClass:"tweet-heart d-flex",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.deleteLiked(i.id)}}},[e("img",{staticClass:"icon-reply-heart",attrs:{src:"https://i.postimg.cc/rFB1FHD6/icon-Liked.png",alt:"red-heart-icon"}}),e("p",{staticClass:"number"},[t._v(t._s(i.likeCount))])]):t._e(),i.isLike?t._e():e("div",{staticClass:"tweet-heart d-flex",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.addLiked(i.id)}}},[e("img",{staticClass:"icon-reply-heart",attrs:{src:s("c908"),alt:"empty-heart-icon"}}),e("p",{staticClass:"number"},[t._v(t._s(i.likeCount))])])])])],1)})),0)}),n=[],o=s("2708"),c=s("2fa3"),l=s("6783"),d={name:"TweetsWall",mixins:[o["f"],o["d"]],props:{initialTweets:{type:Array,required:!0}},data(){return{tweets:[],oneTweet:{}}},watch:{initialTweets(t){this.tweets=[...t]}},created(){this.fetchTweets()},methods:{fetchTweets(){this.tweets=this.initialTweets},isClickedTweet(t){this.oneTweet=this.tweets.find(e=>e.id===t),this.$emit("after-click-reply",this.oneTweet)},async addLiked(t){try{const{data:e}=await l["a"].tweets.addLiked({tweetId:t});if("error"===e.status)throw new Error(e.message);this.tweets=this.tweets.map(e=>t===e.id?{...e,isLike:!e.isLike,likeCount:e.likeCount+1}:e)}catch(e){console.error(e.message),c["a"].fire({icon:"error",title:"無法加入喜歡，請稍後再試"})}},async deleteLiked(t){try{const{data:e}=await l["a"].tweets.deleteLiked({tweetId:t});if("error"===e.status)throw new Error(e.message);this.tweets=this.tweets.map(e=>t===e.id?{...e,isLike:!e.isLike,likeCount:e.likeCount-1}:e)}catch(e){console.error(e.message),c["a"].fire({icon:"error",title:"無法移除喜歡，請稍後再試"})}}}},u=d,p=(s("5b67"),s("2877")),A=Object(p["a"])(u,r,n,!1,null,"391ae4f4",null),w=A.exports,h=s("2f62"),m={name:"MainPage",mixins:[o["d"]],components:{TweetsWall:w},computed:{...Object(h["b"])(["currentUser"])},props:{initialTweets:{type:Array,required:!0},theTweetId:{type:Number,default:()=>({theTweetId:-1})}},data(){return{tweets:[],description:""}},watch:{initialTweets(t){this.tweets=[...t]},theTweetId(t){this.addCommentCount(t)}},created(){this.tweets=this.initialTweets},methods:{async handleSubmit(){try{if(this.description.length>140)return void c["a"].fire({icon:"warning",title:"字數不可超過 140 字"});if(this.description=this.description.trim(),!this.description)return void c["a"].fire({icon:"warning",title:"內容不可空白"});const{data:t}=await l["a"].tweets.create({description:this.description});if("error"===t.status)throw new Error(t.message);this.tweets.unshift({id:t.data.Id,UserId:t.data.id,description:t.data.description,account:this.currentUser.account,name:this.currentUser.name,avatar:this.currentUser.avatar,createdAt:t.data.createdAt,likeCount:0,commentCount:0,isLike:!1}),this.description="",c["a"].fire({icon:"success",title:"推文成功"})}catch(t){console.error(t.message),c["a"].fire({icon:"error",title:"推文失敗，請稍後再試"})}},addCommentCount(t){this.tweets=this.tweets.map(e=>e.id===t?{...e,commentCount:e.commentCount+1}:e)},afterClickReply(t){this.$emit("after-click-reply",t)}}},C=m,f=(s("7653"),Object(p["a"])(C,i,a,!1,null,"4d8dc789",null));e["default"]=f.exports},"5b67":function(t,e,s){"use strict";s("85c8")},6918:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAK2SURBVHgBvVZdbtpAEJ5Z23mpULlBOQI3CDlBkxOUvEUJVYzapFGVFBOoFBGkuBJEvNGcoHCCcoNyg/oAfaCvYHs6swaUCJvWhuaTYMf27n47s/MH8MzApA+2bednZq6MCnYJoIgEBVgLGgOiFxIM728bX1MRVs4+nQKRw1/zkAF8QI9/9TjiFcKTD1d9DKEcraQRAQ4D3xj0XMeDNTg+c4oGBMUQoba0BqLTaV3XEwnfntfuiEKbxQmP9W77swsZUHl/ydbBWhzpklCbEUgIJiEYe/e3zhg2gGisIPgRsdBBp9UciKjk78i+KBCQaAYhQHVTMoHsQQRV/UDYFydcElqWVWJVmXS9h6VFt91gi9GIRfb4F+UlIRGeyohEme5sHRDCBz2ieq0JbdvJM1NRHjrt5gi2DGO2M5iLmkNNYVqIjkIb31scXNeZEILHYv7kXfOVUqbKFNxZoXzT9ERAwv9GzIlE720Fv36r3g1nEOJAZy9duO42cWx/LEqKFLO6rjtR0RGi+1u47jaBplGSURGM9KjfEkSpB9XpNrXUeyHokCOihyVhFA40kuAPrNwdbAnBzsua7CmlaxFyavHRN8xDsTPfZblyfvVN0h1sgMr5ZW1eCGTvg8X7J9Xi6MIpGGHwXcqL1DSFMJhNZ1967o0HKSBknD8dkZm0+rjqrNRDTer7DiK+Wb5kL+aZ2rHYCsNuqxGbAsUqpmX1WSxF67DeaV87j+ckthhc00piXlC4+6S9YG/rtBt7sKrVPoTYn3cJE1btIC5VmkmE88l6geTbmTkrcwJecSjxRN/K9fkg+/r43CVwMjnU8R0DBf8AyYcIOI7TyjdzP1nch6hLqPJB95LIBIkarkOyVg3vb2vTEyIU51rpu0rb+2TRMJ9Wq0yEoR9OlGWIuFFHlwoSKrpD2AB/AFbYPbGYXea3AAAAAElFTkSuQmCC"},7653:function(t,e,s){"use strict";s("db47")},"85c8":function(t,e,s){},c908:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAnCAYAAAB5XdqFAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAATMSURBVHgB1VjPTxtHFH6zP2grhda59Vbn1ltNqtCKoMT01FvcY0+Jbyi4woiAogrCGtOKYlQ2ClBuhFtv0GNPrNOGolAp7l8QH9ubpfQQddf7Om/t3Z1dr+1dE+rmk0Az49k337z3Zua9B/CGgMWZVCwWU5ZyKYPAMgwwRWM2Y3XbNI09fb0OCTBd1NKq+k8WUUoLw8b25poBgxJ1CI68Ows2FvnMVJdphg1wsFspP+4lq3BvKQuMrfBmNnICQoMxODJNsxS1+a5EZxYf3GY26j0IhgU9ls2Xc7quN8Rx2qz51ugWs+FOHDkIUOd/pfDGI4kWFpdWAJkWlIA1PrtKO299yT7i/3PhRZqmOeVqZLp4Py2r6jFfJB2SZfD/1TaDFDJ2i2FoDmPa9sZqqSvRwsKDWS5J92QyqHPN5qN8aPq+lpYtS2OM3RbJqubLMWqb6ujzIEl8qJiKputao2Nd7hoosX2RMF97bmejrHcQJQ0oqvpCGDpSTDkfJVjEzL3lIvevLfC3f4Tkc+CbG9Ge29n8Ru8lp1jUUpba3AffUg3LNMfIQpI4kZtpRdhNPQ5Jws5mWecHKu8NIOSSkiTQWrQm32mtPZTiiiPivkbD2rRk+creulaHBCjML+kgsdnAILLS9uaqBglALqU0m75lEac8jYrapBOclCRBaSoaWcKTz9tJSRJobUQ8AJ9QziPKkGW8BcRJCUCmo4Pny4ESDAhSltC56fsoQ4+oYv1dgwFBtwO5jWXKV/o9Ar2gWIrPAelFhA6faGxXypfhf4CZxeUX7nUlhX/kzPue8mHAISoeHAy/IkOEePl7GhVP68z82gcwZNwtfp0Rug3h1GPda8uvxmDIkGQhDESoSUKnKrSzMGTwd/+W0KuKh8nwm36QMURkhbbhEXWiI/ROfMoJdIcEWtuNulqv25oRup7woddsReNDAQpho4QtSweI8tdAjHCyw9AqBUdi5GXKsvMMB4i2Qjon+m5hCFrtFhx1vEyWrOSF7n+q1a8Wlu9EaZPQQdTZge37KveXfUrQ4IJBa/Dgu2uoKUV9RHGlewPQ6WuOjF64CzRH3lsRT7qoTYIc9dHpqfHqk+s3/wI/d/n02mS2fva0+gdcAMjkCLju9nm8MffDxqohzulZgCgsLB+CkGjZ0JzarXw7cKwaBScFUtTnbv2ATP6oUs6H50m9hFCiJQQrKQbyIQmG10iS8n6XZJTJXfStPd1d0DISNn1h7bw9XBFJCqeCEsz7GzwzGOuWq0n9BO5WtJrNCwFunwRb6qXj89wETk2LywgUJxjmeyWUMsTA2cmT2vjEDcYfgGxb6vu2PPL51fGJn38//TWRZl2SXIYfb1JKXSnv9fouFlHCs5MnRpgsk+Xcx+MTP8UlSz6J6ju/cSEfBkjGSKljE40iy+iAcbLXrk9Wz05++bPXt05EJMuHAXMnKE4kItqVLEjT45NZePa0Wo0kSYU3Bj/SXI+jU+ZZW4+5bLyKc+Ti80s5lNlWoPrGbwSe0niVvy7F2wZn+UW/CvNrI0pwyo5287ijtgnYfhRYJjiMhqUo+UHKReci6oJrTusTEja4qUtxKnrdkNhHo0B+e/XGZwfMti/zom6aD73d/onM/B0PyL989H3ZgHPgX5UtGWLrJ4H6AAAAAElFTkSuQmCC"},db47:function(t,e,s){}}]);
//# sourceMappingURL=chunk-069e44a6.b54b3048.js.map